<header class="site-header" role="banner">
  <div class="wrapper">
    <h1 class="site-title">
      <a href="{{ site.baseurl | prepend: site.url }}">{{ site.title }}</a>
    </h1>

        <!-- dark mode toggle -->
    <button id="dark-mode-toggle" class="dark-mode-toggle" aria-label="Alternar modo escuro" title="Alternar modo escuro">🌙</button>
  </div>
  </div>
</header>

<style>
  :root{
    --bg: #ffffff;
    --text: #0b0f14;
    --muted: #6a737d;
    --link: #0366d6;
    --header-bg: rgba(190, 208, 247, 0.651);
  }
  [data-theme="dark"]{
    --bg: #0b1116;
    --text: #dbe9f5;
    --muted: #9aaaba;
    --link: #58a6ff;
    --header-bg: rgba(8,12,16,0.85);
  }

  html,body{
    background: var(--bg);
    color: var(--text);
    transition: background .18s ease, color .18s ease;
  }
  a{ color: var(--link); }

  .site-header{
    background: var(--header-bg);
    transition: background .18s ease;
  }

  /* centralizar o toggle dentro da wrapper */
  .wrapper {
    position: relative;
  }

  .dark-mode-toggle{
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 5;
    padding: .25rem .5rem;
    font-size: 1rem;
    background: transparent;
    border: 1px solid rgba(0,0,0,0.06);
    border-radius: 6px;
    cursor: pointer;
    color: var(--text);
  }
  [data-theme="dark"] .dark-mode-toggle{
    border-color: rgba(255,255,255,0.08);
  }

  .post-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

/* Estilo do card */
.post-card {
  display: block;
  background-color: var(--bg);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 14px;
  padding: 20px;
  text-decoration: none;
  color: inherit;
  transition: all 0.2s ease-in-out;
}

/* Tema escuro */
[data-theme="dark"] .post-card {
  background-color: #161b22;
  border-color: rgba(255,255,255,0.2);
}

/* Hover states */
.post-card:hover {
  background-color: #ffffff;
  color: #0b1116;
  transform: translateY(-4px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* Elementos internos do card */
.post-card .post-title {
  color: var(--link);
  margin: 0 0 0.5rem 0;
  font-size: 1.2rem;
}

.post-card:hover .post-title {
  color: var(--link);
}

.post-card .post-excerpt {
  color: inherit;
  margin-bottom: 1rem;
  font-size: 0.95rem;
}

.post-card .post-meta {
  color: var(--muted);
  font-size: 0.875rem;
  opacity: 0.8;
}

</style>

<script>
  (function(){
    const key = 'theme';
    const btnId = 'dark-mode-toggle';

    function applyTheme(theme){
      if(theme === 'dark'){
        document.documentElement.setAttribute('data-theme','dark');
        document.getElementById(btnId).textContent = '☀️';
      } else {
        document.documentElement.removeAttribute('data-theme');
        document.getElementById(btnId).textContent = '🌙';
      }
      try { localStorage.setItem(key, theme); } catch(e){}
    }

    function init(){
      const btn = document.getElementById(btnId);
      if(!btn) return;

      let saved = null;
      try { saved = localStorage.getItem(key); } catch(e){}

      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = saved || (prefersDark ? 'dark' : 'light');
      applyTheme(theme);

      btn.addEventListener('click', function(){
        const current = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
        applyTheme(current === 'dark' ? 'light' : 'dark');
      });

      // opcional: reagir a mudança da preferência do sistema quando o usuário não for explícito
      try {
        if(window.matchMedia){
          window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            const savedLocal = localStorage.getItem(key);
            if(!savedLocal) applyTheme(e.matches ? 'dark' : 'light');
          });
        }
      } catch (e) {}
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  })();
</script>